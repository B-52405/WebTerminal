var Fe=Object.defineProperty;var Me=(c,r,f)=>r in c?Fe(c,r,{enumerable:!0,configurable:!0,writable:!0,value:f}):c[r]=f;var h=(c,r,f)=>(Me(c,typeof r!="symbol"?r+"":r,f),f),I=(c,r,f)=>{if(!r.has(c))throw TypeError("Cannot "+f)};var u=(c,r,f)=>(I(c,r,"read from private field"),f?f.call(c):r.get(c)),p=(c,r,f)=>{if(r.has(c))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(c):r.set(c,f)},P=(c,r,f,A)=>(I(c,r,"write to private field"),A?A.call(c,f):r.set(c,f),f);var U=(c,r,f)=>(I(c,r,"access private method"),f);(function(c,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],r):(c=typeof globalThis<"u"?globalThis:c||self,r(c.WebTerminal={},c.Vue))})(this,function(c,r){var j,W,k,_,y,b,w,d;"use strict";function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var A=Object.prototype.toString,F=function(t){if(t===void 0)return"undefined";if(t===null)return"null";var n=typeof t;if(n==="boolean")return"boolean";if(n==="string")return"string";if(n==="number")return"number";if(n==="symbol")return"symbol";if(n==="function")return v(t)?"generatorfunction":"function";if(q(t))return"array";if(ne(t))return"buffer";if(te(t))return"arguments";if(X(t))return"date";if(Q(t))return"error";if(Z(t))return"regexp";switch(M(t)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(ee(t))return"generator";switch(n=A.call(t),n){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return n.slice(8,-1).toLowerCase().replace(/\s/g,"")};function M(e){return typeof e.constructor=="function"?e.constructor.name:null}function q(e){return Array.isArray?Array.isArray(e):e instanceof Array}function Q(e){return e instanceof Error||typeof e.message=="string"&&e.constructor&&typeof e.constructor.stackTraceLimit=="number"}function X(e){return e instanceof Date?!0:typeof e.toDateString=="function"&&typeof e.getDate=="function"&&typeof e.setDate=="function"}function Z(e){return e instanceof RegExp?!0:typeof e.flags=="string"&&typeof e.ignoreCase=="boolean"&&typeof e.multiline=="boolean"&&typeof e.global=="boolean"}function v(e,t){return M(e)==="GeneratorFunction"}function ee(e){return typeof e.throw=="function"&&typeof e.return=="function"&&typeof e.next=="function"}function te(e){try{if(typeof e.length=="number"&&typeof e.callee=="function")return!0}catch(t){if(t.message.indexOf("callee")!==-1)return!0}return!1}function ne(e){return e.constructor&&typeof e.constructor.isBuffer=="function"?e.constructor.isBuffer(e):!1}/*!
 * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const G=Symbol.prototype.valueOf,re=F;function ie(e,t){switch(re(e)){case"array":return e.slice();case"object":return Object.assign({},e);case"date":return new e.constructor(Number(e));case"map":return new Map(e);case"set":return new Set(e);case"buffer":return le(e);case"symbol":return ae(e);case"arraybuffer":return se(e);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return ce(e);case"regexp":return oe(e);case"error":return Object.create(e);default:return e}}function oe(e){const t=e.flags!==void 0?e.flags:/\w+$/.exec(e)||void 0,n=new e.constructor(e.source,t);return n.lastIndex=e.lastIndex,n}function se(e){const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}function ce(e,t){return new e.constructor(e.buffer,e.byteOffset,e.length)}function le(e){const t=e.length,n=Buffer.allocUnsafe?Buffer.allocUnsafe(t):Buffer.from(t);return e.copy(n),n}function ae(e){return G?Object(G.call(e)):{}}var ue=ie;/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var fe=function(t){return t!=null&&typeof t=="object"&&Array.isArray(t)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var he=fe;function K(e){return he(e)===!0&&Object.prototype.toString.call(e)==="[object Object]"}var me=function(t){var n,i;return!(K(t)===!1||(n=t.constructor,typeof n!="function")||(i=n.prototype,K(i)===!1)||i.hasOwnProperty("isPrototypeOf")===!1)};const de=ue,pe=F,ge=me;function T(e,t){switch(pe(e)){case"object":return _e(e,t);case"array":return ye(e,t);default:return de(e)}}function _e(e,t){if(typeof t=="function")return t(e);if(t||ge(e)){const n=new e.constructor;for(let i in e)n[i]=T(e[i],t);return n}return e}function ye(e,t){const n=new e.constructor(e.length);for(let i=0;i<e.length;i++)n[i]=T(e[i],t);return n}var be=T;const S=f(be),m=Object.freeze({BLACK:"black",BLUE:"blue",GREEN:"green",RED:"red",YELLOW:"yellow",WHITE:"white",ORANGR:"orange",GRAY:"#282828"}),we=10.8;class C{constructor(){h(this,"text","");h(this,"cls",[]);h(this,"style",{});h(this,"click");arguments.length>0&&(this.text=arguments[0])}Text(t){return this.text=t,this}Clss(t){return this.cls=t,this}Cls(t){return this.cls.push(t),this}Style(t){return this.style=t,this}Property(t,n){return this.style[t]=n,this}Click(t){return this.click=t,this}get length(){return this.text.length}copy(){return new C().Text(this.text).Clss(S(this.cls)).Style(S(this.style)).Click(this.click)}slice(t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);const i=this.copy();return i.text=i.text.slice(t,n),i}warning(t){return this.text=t,this.style={color:m.ORANGR},this}error(t){return this.text=t,this.style={color:m.RED},this}red(){this.style.color=m.RED}}function O(){return arguments.length===0?new C:new C().Text(arguments[0])}const Ge="",B=(e,t)=>{const n=e.__vccOpts||e;for(const[i,s]of t)n[i]=s;return n},xe={props:{log_line:Array,terminal_line_length:Number,cursor_index:Number},computed:{lines(){let e=this.terminal_line_length,t=[[]];if(this.log_line.forEach(n=>{if(e==0&&(t.push([]),e=this.terminal_line_length),n.length>e){const i=n.slice(0,e);let s=n.slice(e);for(t[t.length-1].push(i);s.length>this.terminal_line_length;)t.push([s.slice(0,this.terminal_line_length)]),s=s.slice(this.terminal_line_length);t.push([s]),e=this.terminal_line_length-n.length+e}else t[t.length-1].push(n.copy()),e-=n.length}),this.cursor_index===void 0)return t;if(this.cursor_index===0){const n=t[t.length-1],i=O(" ").Cls("cursor");return n.push(i),t}else{let n=this.cursor_index;for(let i=t.length-1;i>=0;i--){const s=t[i];for(let o=s.length-1;o>=0;o--){const l=s[o];if(l.length>=n){const a=l.length-n,x=l.slice(0,a),R=l.slice(a,a+1).Cls("cursor"),$=l.slice(a+1);return s.splice(o,1,x,R,$),t}else n-=l.length}}}return t}}},ke={class:"log_line"},Oe=["onClick"];function je(e,t,n,i,s,o){return r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(o.lines,l=>(r.openBlock(),r.createElementBlock("div",ke,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(l,({text:a,cls:x,style:R,click:$})=>(r.openBlock(),r.createElementBlock("p",{class:r.normalizeClass(["clause",x]),style:r.normalizeStyle(R),onClick:$},r.toDisplayString(a),15,Oe))),256))]))),256)}const Ae=B(xe,[["render",je],["__scopeId","data-v-7ab38fdb"]]);let E=console.log;function Se(e){typeof e=="function"&&(E=e)}function D(e,t){for(let n of e)E(n);typeof t=="function"&&t()}function L(e,t){D([e],t)}async function Ce(e,t){for(;;){const{value:n,done:i}=await e.next();if(i)break;E(n)}typeof t=="function"&&t()}function V(e){return Array.isArray(e)&&e.length>0}function z(e){return typeof e=="object"&&Object.keys(e).length>0}function Te(e){return e==null||typeof e!="object"&&typeof e!="function"||typeof e.next!="function"||typeof e[Symbol.iterator]!="function"?!1:e[Symbol.iterator]()===e}function Be(e){return function(t){for(const n in e)t[n]===void 0&&(t[n]=S(e[n]))}}class Ee{constructor(){p(this,j);h(this,"commands",{})}Command(t){const n=new De(t);return this.commands[t.toLowerCase()]=n,n}Remove(t){delete this.commands[t]}complete(t){if(U(this,j,W).call(this,t).length!==1)return[];{const n=[],i=t.toLowerCase();for(let s in this.commands)s.startsWith(i)&&n.push(this.commands[s].name);return n.sort()}}execute(t){const n=U(this,j,W).call(this,t);if(n.length===0)return;const i=this.commands[n[0]];if(i===void 0){D(["","  No such command.","  Try 'help' for assistance.",""]);return}i.call(n.slice(1))}help(t){if(t===void 0){const s=["","Commands:"];for(const o in this.commands){const l=this.commands[o];let a=`  ${l.name}`;a+=" ".repeat(N-a.length)+l.description,s.push(a)}return s.push(""),s}if(!(t in this.commands))return["","  No such command.",""];const n=[""],i=this.commands[t];if(i.description!==void 0&&(n.push("Description:"),n.push(`  ${i.description}`),n.push("")),z(i.params)){n.push("Params:");for(const s in i.params){const o=i.params[s];let l=`  ${o.name}`;l+=" ".repeat(H-l.length)+o.type,l+=" ".repeat(N-l.length)+o.description,o.default!==void 0&&(l+=`(default: ${JSON.stringify(o.default)})`),n.push(l)}n.push("")}if(z(i.options)){n.push("Options:");for(const s in i.options){const o=i.options[s];let l="  ";"short"in o&&(l+=`-${o.short}, `),l+=`--${o.name}`,l+=" ".repeat(H-l.length)+o.type,l+=" ".repeat(N-l.length)+o.description,o.default!==void 0&&(l+=`(default: ${JSON.stringify(o.default)})`),n.push(l)}n.push("")}return n.length===0&&(n.push("No description, no parama, no options, nothing."),n.push("")),n}}j=new WeakSet,W=function(t){return t.split(/\s+/).filter(Boolean)};class De{constructor(){h(this,"name");h(this,"action");h(this,"description");h(this,"params",{});h(this,"options",{});p(this,k,[]);p(this,_,{});p(this,y,[]);p(this,b,[]);p(this,w,[]);p(this,d,0);arguments.length>0&&(this.name=arguments[0])}Name(t){return this.name=t,this}Action(t){return this.action=t,this}Description(t){return this.description=t,this}Param(t){J(t);const n=t.name.replace(/\s+/g,"");return this.params[n]=t,u(this,k).push(u(this,d)),u(this,y).push(void 0),u(this,b).push(Y[t.type]),u(this,w).push(t.default),P(this,d,u(this,d)+1),this}Option(t){const n=t.name.replace(/\s+/g,"");return J(t),this.options[n]=t,u(this,_)["--"+t.name]=u(this,d),"short"in t&&(u(this,_)["-"+t.short]=u(this,d)),t.type==="Boolean"?(u(this,w).push(!1),u(this,y).push(!0)):(u(this,w).push(t.default),u(this,y).push(!1)),u(this,b).push(Y[t.type]),P(this,d,u(this,d)+1),this}call(t){const n=S(u(this,w));let i=0;t.push(void 0);for(let o=0;o<t.length-1;o++){const l=t[o];if(l in u(this,_)){const a=u(this,_)[l],x=u(this,b)[a];u(this,y)[a]?n[a]=!0:n[a]=x(t[++o])}else if(i===u(this,k).length){L("error: too many parameters");return}else{const a=u(this,k)[i++],x=u(this,b)[a];n[a]=x(l)}}const s=this.action(...n);Te(s)?Ce(s):V(s)?D(s):typeof s=="string"&&L(s)}}k=new WeakMap,_=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,d=new WeakMap;const H=18,N=28,Y={Number:parseInt,Float:parseFloat,String:e=>e},J=Be({description:""}),g=new Ee;c.setting={prompt:void 0,prompt_visibility:void 0,background_color:void 0,font_color:void 0,logging_interval:void 0};function Le(e){c.setting=e}const Ke="",Ne={expose:["enter"],components:{LogLine:Ae},data(){return{log_lines:[],log_buffer:[],logging:!1,command:"",cursor_index:0,command_history:[],command_history_index:-1,complete_command:[],complete_index:-1,setting:{prompt:"WebTerminal> ",prompt_visibility:!0,logging_interval:24,background_color:m.GRAY,font_color:m.WHITE},terminal_width:void 0,terminal_height:void 0,terminal_line_length:void 0}},methods:{scroll_to_bottom(){setTimeout(()=>{this.$refs.terminal_window.scrollTop=this.$refs.terminal_window.scrollHeight})},log_to_buffer(e){if(typeof e=="string")this.log_buffer.push([O(e)]);else if(V(e)){for(let t=0;t<e.length;t++)typeof e[t]=="string"&&(e[t]=O(e[t]));this.log_buffer.push(e)}this.log_buffer.length>0&&!this.logging&&(this.logging=!0,this.buffer_to_log())},async buffer_to_log(){if(this.scroll_to_bottom(),this.log_buffer.length===0){this.logging=!1;return}this.log_buffer.length>0&&this.log_lines.push(this.log_buffer.shift()),setTimeout(this.buffer_to_log,this.setting.logging_interval)},enter(){this.logging||(L(this.command_line),g.execute(this.command),this.cursor_index=0,this.command_history.unshift(this.command),this.command_history_index=-1,this.$nextTick(()=>{this.command=""}))},history(e){e.key==="ArrowUp"?this.command_history_index<this.command_history.length-1&&(this.command_history_index++,this.command=this.command_history[this.command_history_index],this.cursor_to_end()):e.key==="ArrowDown"&&this.command_history_index>0&&(this.command_history_index--,this.command=this.command_history[this.command_history_index],this.cursor_to_end())},tab(){this.complete_index===-1&&(this.complete_command=g.complete(this.command)),this.complete_command.length!==0&&(this.complete_index=(this.complete_index+1)%this.complete_command.length,this.command=this.complete_command[this.complete_index],this.cursor_to_end())},cursor_to_end(){setTimeout(()=>{this.$refs.terminal_input.setSelectionRange(this.command.length,this.command.length),this.cursor_index=0})},keydown(e){e.key!=="Tab"&&(this.complete_command=[],this.complete_index=-1)},update_cursor_index(e){const t=e.target;setTimeout(()=>{this.cursor_index=t.value.length-t.selectionEnd})},focus(e){e&&(e.key==="Control"||e.ctrlKey&&e.key==="c")||this.$nextTick(()=>{this.$refs.terminal_input.focus()})}},watch:{"setting.background_color":function(e){const t=this.$el.parentElement;Object.assign(t.style,{"background-color":e})},"setting.font_color":function(e){console.log("font_color",e);const t=this.$el.parentElement;Object.assign(t.style,{color:e})}},computed:{command_line(){return this.setting.prompt_visibility?[O(this.setting.prompt+this.command)]:[O(this.command)]}},mounted(){this.resize_observer=new ResizeObserver(e=>{for(let t of e)t.target===this.$refs.terminal_window&&(this.terminal_width=t.contentRect.width,this.terminal_height=t.contentRect.height,this.terminal_line_length=Math.floor(this.terminal_width/we))}),this.resize_observer.observe(this.$refs.terminal_window),Se(this.log_to_buffer),Le(this.setting),this.focus()}};function Re(e,t,n,i,s,o){const l=r.resolveComponent("LogLine");return r.openBlock(),r.createElementBlock(r.Fragment,null,[r.createElementVNode("div",{class:"terminal_window",ref:"terminal_window",onKeydown:t[0]||(t[0]=(...a)=>o.focus&&o.focus(...a)),tabindex:"0"},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(s.log_lines,a=>(r.openBlock(),r.createBlock(l,{log_line:a,terminal_line_length:s.terminal_line_length},null,8,["log_line","terminal_line_length"]))),256)),r.withDirectives(r.createElementVNode("div",null,[r.createVNode(l,{ref:"command_line",log_line:o.command_line,terminal_line_length:s.terminal_line_length,cursor_index:s.cursor_index},null,8,["log_line","terminal_line_length","cursor_index"])],512),[[r.vShow,!s.logging]])],544),r.withDirectives(r.createElementVNode("input",{class:"terminal_input",ref:"terminal_input","onUpdate:modelValue":t[1]||(t[1]=a=>s.command=a),onKeydown:[t[2]||(t[2]=r.withKeys((...a)=>o.update_cursor_index&&o.update_cursor_index(...a),["left","right"])),t[3]||(t[3]=r.withKeys((...a)=>o.history&&o.history(...a),["up","down"])),t[4]||(t[4]=r.withKeys((...a)=>o.enter&&o.enter(...a),["enter"])),t[5]||(t[5]=r.withKeys(r.withModifiers((...a)=>o.tab&&o.tab(...a),["prevent"]),["tab"])),t[6]||(t[6]=(...a)=>o.keydown&&o.keydown(...a))]},null,544),[[r.vModelText,s.command]])],64)}const $e=B(Ne,[["render",Re],["__scopeId","data-v-aa044f7e"]]);g.Command("color").Description("Set the console background and font color.").Option({name:"background",type:"String",default:"gray",short:"b",description:"Set background color."}).Option({name:"font",type:"String",default:"white",short:"f",description:"Set font color."}).Action((e,t)=>{e.toUpperCase()in m?c.setting.background_color=m[e.toUpperCase()]:c.setting.background_color=e,t.toUpperCase()in m?c.setting.font_color=m[t.toUpperCase()]:c.setting.font_color=t}),g.Command("hello").Description("Say hello to the world.").Param({name:"name",type:"String",default:"world",description:"Say hello to who."}).Option({name:"ending",type:"String",default:"!",short:"e",description:"Punctuation."}).Option({name:"show",type:"Boolean",short:"s",description:"Whether to display punctuation marks."}).Action((e,t,n)=>`hello ${e}${n?t:""}`),g.Command("help").Description("Provide help information for commands.").Param({name:"command",type:"String",description:"Name of the command."}).Action(e=>g.help(e));const Ve="",Ie={components:{TerminalWindow:$e}},Pe={class:"terminal_container"};function Ue(e,t,n,i,s,o){const l=r.resolveComponent("TerminalWindow");return r.openBlock(),r.createElementBlock("div",Pe,[r.createVNode(l,{ref:"terminal_window"},null,512)])}const We=B(Ie,[["render",Ue],["__scopeId","data-v-2b218421"]]);c.Terminal=We,c.commanding=g,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
